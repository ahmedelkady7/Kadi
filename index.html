<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;700&display=swap" rel="stylesheet">
</head>
<body>

    <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
    <header>
        <div class="search-bar">
            <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù‚Ù†Ø§Ø©..." onkeyup="filterChannels()">
            <button>ğŸ”</button>
        </div>
        <div class="icons">
            <img src="notification-icon.png" alt="Ø¥Ø´Ø¹Ø§Ø±Ø§Øª" onclick="goToNotifications()">
            <img src="profile.jpg" alt="Ø­Ø³Ø§Ø¨ÙŠ" class="profile-pic" onclick="goToAccount()">
        </div>
    </header>

    <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙØ¦Ø§Øª -->
    <div class="categories">
        <button class="category-btn" onclick="filterCategory('all')">Ø§Ù„ÙƒÙ„</button>
        <button class="category-btn" onclick="filterCategory('movies')">Ø£Ø­Ø¯Ø« Ø§Ù„Ø£ÙÙ„Ø§Ù…</button>
        <button class="category-btn" onclick="filterCategory('sports')">Ø±ÙŠØ§Ø¶Ø©</button>
        <button class="category-btn" onclick="filterCategory('news')">Ø£Ø®Ø¨Ø§Ø±</button>
    </div>

    <!-- Ù‚Ø³Ù… Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø© -->
    <section class="live-tv">
        <h2>Live TV Channels</h2>
        <div id="channelsList" class="horizontal-list"></div>
    </section>

    <!-- Ù‚Ø³Ù… Ø§Ù„Ø£ÙÙ„Ø§Ù… -->
    <section class="movies">
        <h2>Ø£Ø­Ø¯Ø« Ø§Ù„Ø£ÙÙ„Ø§Ù…</h2>
        <div id="moviesList" class="movie-slider"></div>
    </section>

    <script>
        // ØªÙƒÙˆÙŠÙ† Firebase
        const firebaseConfig = {
            apiKey: "AlzaSyAI21TvGX8jjTbEIDww5GEKcxM9zL6Gkn8",
            authDomain: "ak-sport-a985e.firebaseapp.com",
            databaseURL: "https://ak-sport-a985e-default-rtdb.firebaseio.com",
            projectId: "ak-sport-a985e",
            storageBucket: "ak-sport-a985e.appspot.com",
            messagingSenderId: "922662521404",
            appId: "1:922662521404:web:be257019ae9c69f6ddd139"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ø§Ù„Ù…Ø¨Ø§Ø´Ø±Ø©
        function loadChannels() {
            db.ref("ak_tv_2").once("value", (snapshot) => {
                let channels = snapshot.val();
                let list = document.getElementById("channelsList");
                list.innerHTML = "";
                for (let key in channels) {
                    let channel = channels[key];
                    let item = `<div class="channel">
                                    <img src="${channel.img}" alt="${channel.name}">
                                    <p>${channel.name}</p>
                                </div>`;
                    list.innerHTML += item;
                }
            });
        }

        // Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙÙ„Ø§Ù… Ø¨ØªØ±ØªÙŠØ¨ ØªØµØ§Ø¹Ø¯ÙŠ Ø­Ø³Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø§Øª
        function loadMovies() {
            db.ref("film").orderByChild("view").once("value", (snapshot) => {
                let movies = snapshot.val();
                let list = document.getElementById("moviesList");
                list.innerHTML = "";
                for (let key in movies) {
                    let movie = movies[key];
                    let item = `<div class="movie-card" onclick="goToEpisode('${movie.id}')">
                                    <img src="${movie.cover}" alt="${movie.name}">
                                    <p>${movie.name}</p>
                                </div>`;
                    list.innerHTML += item;
                }
            });
        }

        // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù‚Ù†ÙˆØ§Øª
        function filterChannels() {
            let input = document.getElementById("searchInput").value.toLowerCase();
            let channels = document.getElementsByClassName("channel");
            for (let channel of channels) {
                let name = channel.getElementsByTagName("p")[0].innerText.toLowerCase();
                channel.style.display = name.includes(input) ? "block" : "none";
            }
        }

        // ÙÙ„ØªØ±Ø© Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©
        function filterCategory(category) {
            let allChannels = document.getElementsByClassName("channel");
            for (let channel of allChannels) {
                channel.style.display = category === "all" || channel.dataset.category === category ? "block" : "none";
            }
        }

        // Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø¥Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
        function goToNotifications() {
            window.location.href = "notifications.html";
        }

        // Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø¥Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„Ø­Ø³Ø§Ø¨
        function goToAccount() {
            window.location.href = "account.html";
        }

        // Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø¥Ù„Ù‰ ØµÙØ­Ø© Ø§Ù„Ø­Ù„Ù‚Ø©
        function goToEpisode(id) {
            window.location.href = `episode.html?id=${id}`;
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.onload = function () {
            loadChannels();
            loadMovies();
        };
    </script>

</body>
</html>
