<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js"></script>
</head>
<body>

    <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
    <header>
        <div class="logo">Cortex TV</div>
        <div class="search-container">
            <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø­ØªÙˆÙ‰..." onkeyup="filterContent()">
            <img src="search-icon.png" alt="Ø¨Ø­Ø«" class="search-icon" onclick="toggleSearch()">
        </div>
        <div class="nav-icons">
            <img src="tv-icon.png" alt="Ø§Ù„Ù‚Ù†ÙˆØ§Øª" onclick="goToChannels()">
            <img src="movies-icon.png" alt="Ø£ÙÙ„Ø§Ù… ÙˆÙ…Ø³Ù„Ø³Ù„Ø§Øª" onclick="goToMovies()">
            <img src="live-icon.png" alt="Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±" onclick="goToLive()">
        </div>
    </header>

    <!-- Ø§Ù„Ø£Ù‚Ø³Ø§Ù… -->
    <section class="content-section">
        <h2>ğŸ“º Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ø§Ù„ØªÙ„ÙØ²ÙŠÙˆÙ†ÙŠØ©</h2>
        <div id="channelsList" class="horizontal-list"></div>
    </section>

    <section class="content-section">
        <h2>ğŸ¬ Ø£ÙÙ„Ø§Ù… ÙˆÙ…Ø³Ù„Ø³Ù„Ø§Øª</h2>
        <div id="moviesList" class="horizontal-list"></div>
    </section>

    <section class="content-section">
        <h2>ğŸ”´ Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</h2>
        <div id="liveList" class="horizontal-list"></div>
    </section>

    <script>
        // ØªÙƒÙˆÙŠÙ† Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyAI21TvGX8jjTbEIDww5GEKcxM9zL6Gkn8",
            authDomain: "ak-sport-a985e.firebaseapp.com",
            databaseURL: "https://ak-sport-a985e-default-rtdb.firebaseio.com",
            projectId: "ak-sport-a985e",
            storageBucket: "ak-sport-a985e.appspot.com",
            messagingSenderId: "922662521404",
            appId: "1:922662521404:web:be257019ae9c69f6ddd139"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Firebase
        function loadContent(ref, listId) {
            db.ref(ref).once("value", (snapshot) => {
                let data = snapshot.val();
                let list = document.getElementById(listId);
                list.innerHTML = "";
                for (let key in data) {
                    let item = data[key];
                    let element = `<div class="card" onclick="watch('${item.link}')">
                                    <img src="${item.img || 'default-thumbnail.jpg'}" alt="${item.name}">
                                    <p>${item.name}</p>
                                </div>`;
                    list.innerHTML += element;
                }
            });
        }

        function watch(link) {
            window.open(link, "_blank");
        }

        function goToChannels() {
            window.location.href = "live2.html";
        }

        function goToMovies() {
            window.location.href = "film.html";
        }

        function goToLive() {
            window.location.href = "show.html";
        }

        function toggleSearch() {
            let searchInput = document.getElementById("searchInput");
            searchInput.classList.toggle("expanded");
            if (searchInput.classList.contains("expanded")) {
                searchInput.focus();
            }
        }

        function filterContent() {
            let input = document.getElementById("searchInput").value.toLowerCase();
            let items = document.getElementsByClassName("card");
            for (let item of items) {
                let name = item.getElementsByTagName("p")[0].innerText.toLowerCase();
                item.style.display = name.includes(input) ? "block" : "none";
            }
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.onload = function () {
            loadContent("ak_tv_2", "channelsList");
            loadContent("film", "moviesList");
            loadContent("show", "liveList");
        };
    </script>
</body>
</html>
